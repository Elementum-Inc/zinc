{% liquid
  assign color_scheme_array = 'background title text icon-stroke icon-fill cart-indicator'

  case section.settings.color_scheme
    when 'primary'
      assign color_scheme_array = 'bg-primary text-secondary text-secondary stroke-secondary fill-none bg-secondary' | split: ' '
    when 'secondary'
      assign color_scheme_array = 'bg-secondary text-primary text-primary stroke-primary fill-none bg-primary' | split: ' '
    when 'accent1'
      assign color_scheme_array = 'bg-primary text-accent1 text-secondary stroke-secondary fill-accent1 bg-accent1' | split: ' '
    when 'accent2'
      assign color_scheme_array = 'bg-primary text-accent2 text-secondary stroke-secondary fill-accent2 bg-accent2' | split: ' '
  endcase
%}

{% style %}
.header {
  padding-bottom: {{ section.settings.padding_bottom }}px;
  padding-top: {{ section.settings.padding_top }}px;
}
{% endstyle %}

<header class="header {{ color_scheme_array[0] }} {{ color_scheme_array[2] }} logo-{{ section.settings.logo_position }}">
  {% comment %} logo {% endcomment %}
  <h1 class="header__logo order-none">
    <a href="{{ routes.root_url }}">
      {%- if section.settings.logo != blank -%}
        {%- assign logo_alt = section.settings.logo.alt | default: shop.name | escape -%}
        {%- assign logo_height = section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio -%}
        {{ section.settings.logo | image_url: width: section.settings.width | image_tag:
          class: 'logo__image',
          widths: '50, 100, 150, 200, 250, 300, 400, 500',
          height: logo_height,
          width: section.settings.logo_width,
          alt: logo_alt
        }}
      {%- else -%}
        <span class="logo__fallback {{ color_scheme_array[1] }}">{{ shop.name }}</span>
      {%- endif -%}
    </a>
  </h1>
  {% comment %} menu {% endcomment %}
  {% if section.settings.menu %}
    <div class="header__menu order-1">
      {% if section.settings.collapse_menu_desktop %}
      {% endif %}
      {% unless section.settings.collapse_menu_desktop %}
        <nav class="header__menu-top">
          {% for link in section.settings.menu.links %}
            {{ link.title | link_to: link.url, class: 'top-link' }}
          {% endfor %}
        </nav>
      {% endunless %}
    </div>
  {% endif %}
  {% comment %} user menu {% endcomment %}
  <div class="header__user-menu order-2 {{ section.settings.user_menu_type }} icons-{{ section.settings.menu_icon_position }}">
    {% comment %} search {% endcomment %}
    <div id="searchMenu"></div>
    {% comment %} user {% endcomment %}
    <a class="header__icon-link" href="{{ routes.account_url }}">
      {% render 'icon-user', stroke: color_scheme_array[3] , fill: color_scheme_array[4] %}
     <span class="label">Account</span>
    </a>
    {% comment %} cart {% endcomment %}
    <a class="header__icon-link" href="{{ routes.cart_url }}">
     {% render 'icon-shopping-bag', stroke: color_scheme_array[3] , fill: color_scheme_array[4] %}
     <span class="label">Cart</span>
    </a>
  </div>
</header>

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "accent1",
          "label": "Accent 1"
        },
        {
          "value": "accent2",
          "label": "Accent 2"
        }
      ],
      "default": "primary",
      "label": "t:sections.all.colors.label"
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:sections.header.settings.logo.label",
      "info": "TODO: add note on proper sizing for logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 48,
      "max": 200,
      "step": 8,
      "default": 64,
      "unit": "t:sections.header.settings.logo_width.unit",
      "label": "t:sections.header.settings.logo_width.label"
    },
    {
      "type": "select",
      "id": "logo_position",
      "options": [
        {
          "value": "left",
          "label": "t:sections.header.settings.logo_position.options__1.label"
        },
        {
          "value": "right",
          "label": "t:sections.header.settings.logo_position.options__2.label"
        },
        {
          "value": "split-menu",
          "label": "t:sections.header.settings.logo_position.options__3.label"
        },
        {
          "value": "top-left",
          "label": "t:sections.header.settings.logo_position.options__4.label"
        },
        {
          "value": "top-right",
          "label": "t:sections.header.settings.logo_position.options__5.label"
        },
        {
          "value": "top-center",
          "label": "t:sections.header.settings.logo_position.options__6.label"
        }
      ],
      "default": "left",
      "label": "t:sections.header.settings.logo_position.label",
      "info": "t:sections.header.settings.logo_position.info"
    },
    {
      "type": "header",
      "content": "Menu"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    },
    {
      "type": "checkbox",
      "id": "collapse_menu_desktop",
      "default": false,
      "label": "t:sections.header.settings.collapse_menu_desktop.label",
      "info": "t:sections.header.settings.collapse_menu_desktop.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_header",
      "default": true,
      "label": "t:sections.header.settings.enable_sticky_header.label",
      "info": "t:sections.header.settings.enable_sticky_header.info"
    },
    {
      "type": "header",
      "content": "User Menu"
    },
    {
      "type": "select",
      "id": "user_menu_type",
      "options": [
        {
          "value": "minimal",
          "label": "t:sections.header.settings.user_menu_type.options__1.label"
        },
        {
          "value": "compact",
          "label": "t:sections.header.settings.user_menu_type.options__2.label"
        },
        {
          "value": "expanded",
          "label": "t:sections.header.settings.user_menu_type.options__3.label"
        }
      ],
      "default": "minimal",
      "label": "t:sections.header.settings.user_menu_type.label",
      "info": "t:sections.header.settings.user_menu_type.info"
    },
    {
      "type": "select",
      "id": "menu_icon_position",
      "options": [
        {
          "value": "left",
          "label": "t:sections.header.settings.menu_icon_position.options__1.label"
        },
        {
          "value": "right",
          "label": "t:sections.header.settings.menu_icon_position.options__2.label"
        },
        {
          "value": "top",
          "label": "t:sections.header.settings.menu_icon_position.options__3.label"
        }
      ],
      "default": "left",
      "label": "t:sections.header.settings.menu_icon_position.label",
      "info": "t:sections.header.settings.menu_icon_position.info"
    },
    {
      "type": "header",
      "content": "Country/Language Selection"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": false,
      "label": "t:sections.footer.settings.enable_country_selector.label"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": false,
      "label": "t:sections.footer.settings.enable_language_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 20
    }
  ]
}
{% endschema %}
