/*
  [THEME STYLES]
  Base theme styles, avoid modification without development experience/guide if possible.
  If you'd like to layer customizations on top of the theme, please see the merchant.css file,
  found in the assets folder.
*/

body.search--opened,
body.menu--opened {
  @apply overflow-hidden;
}

* {
  @apply focus:(ring-1 ring-scheme-accent)
    focus-visible:(ring-1 ring-scheme-accent);
}

/* Fallback - for browsers that don't support :focus-visible, a fallback is set for :focus */
.focused,
.no-js *:focus {
  @apply focus:(ring-1 ring-scheme-accent);
}

/* Negate the fallback side-effect for browsers that support :focus-visible */
.no-js *:focus:not(:focus-visible) {
  @apply outline-none shadow-none;
}

.focus-inset {
  @apply focus-visible:(ring-1 ring-scheme-accent);
}

.focused.focus-inset,
.no-js .focus-inset:focus {
  @apply ring-1 ring-scheme-accent;
}

.no-js .focus-inset:focus:not(:focus-visible) {
  @apply outline-none shadow-none;
}

/* Dangerous for a11y - Use with care */
.focus-none {
  @apply outline-none shadow-none;
}

.focus-offset:focus-visible {
  @apply ring-1 ring-scheme-accent;
}

.focus-offset.focused,
.no-js .focus-offset:focus {
  @apply ring-1 ring-scheme-accent;
}

.no-js .focus-offset:focus:not(:focus-visible) {
  @apply outline-none shadow-none;
}

.container {
  &--expanded {
    @apply max-w-screen-2xl;
  }

  &--narrow {
    @apply max-w-screen-lg;
  }

  &--tight {
    @apply max-w-screen-md;
  }

  &--no-pad {
    @apply p-0;
  }
}

.media {
  &--auto {
    @apply aspect-auto h-full;

    & > img {
      @apply aspect-auto;
    }
  }

  &--square, &--circle {
    @apply aspect-square;
  }

  &--circle {
    @apply rounded-full;
  }

  &--sportrait {
    aspect-ratio: 2/3;
  }

  &--lportrait {
    aspect-ratio: 9/16;
  }

  &--widescreen {
    aspect-ratio: 16/9;
  }

  &--landscape {
    aspect-ratio: 3/2;
  }
}

.collection {
  &--empty {
    .title {
      @apply font-serif;
    }
  }
}

/* Splide */
.splide {
  &--desktop {
    & .splide__track--container {
      @apply md:px-16 lg:px-20;
    }
  }

  &:not(.splide--desktop) {
    & .splide__arrows {
      .blog & {
        @apply sm:hidden;
      }
    }
  }

  &__arrows {
    @apply relative flex justify-between;
  }

  &__arrow {
    @apply <md:relative h-[unset] w-[unset] rounded-none opacity-100 md:-bottom-8;
    background-color: transparent;
    top: unset;
    transform: unset;

    &--next {
      @apply md:-right-12 lg:-right-16;
    }

    &--prev {
      @apply md:-left-12 lg:-left-16;
    }

    > svg {
      @apply fill-none h-[unset] w-[unset] <sm:(h-12);
    }
  }

  &__pagination {
    @apply <sm:bottom-12;
  }

  &__pagination__page {
    @apply bg-scheme-fg opacity-100;

    .section--foreground & {
      @apply bg-scheme-bg;
    }

    &.is-active {
      @apply bg-scheme-accent;
    }
  }
}

/* Product gallery sliders -- TODO: move to appropriate files */
.product {
  &--stacked {
    & .product__gallery-viewer.splide.is-initialized:not(.is-active) {
      & .splide__list {
        @apply md:(flex flex-wrap);
      }

      & .splide__slide:not(:first-child) {
        width: calc(50% - var(--grid-desktop-horizontal-spacing) / 2);
      }

      & .splide__arrows {
        @apply md:hidden;
      }
    }
  }

  &--vertical_thumbnail_left,
  &--vertical_thumbnail_right {
    & .product__media-gallery {
      @apply md:!flex;
    }

    & .product__gallery-viewer {
      @apply md:flex-1;
    }

    & .thumbnail-slider {
      @apply md:p-0;
      min-width: calc(var(--thumbnail-width) + 2rem);
    }

    & .thumbnail-list {
      @apply md:flex-col;
    }
  }

  &--vertical_thumbnail_left {
    & .product__media-gallery {
      @apply md:flex-row-reverse;
    }

    & .product__gallery-viewer {
      & .splide__arrow--prev {
        @apply -left-[8rem];
      }
    }

    & .thumbnail-slider {
      @apply md:pr-4;
    }
  }

  &--vertical_thumbnail_right {
    & .product__gallery-viewer {
      & .splide__arrow--next {
        @apply -right-[8rem];
      }
    }

    & .thumbnail-slider {
      @apply md:pl-4;
    }
  }
}

.thumbnail-slider {
  @apply px-8;

  & .splide__track {
    @apply w-full;
  }

  & .splide__slide {
    @apply mx-1 lg:mx-2;
    width: calc(var(--thumbnail-width) + .5rem);
    max-width: calc(var(--thumbnail-width) + .5rem);

    @media screen and (min-width: 1024px) {
      width: calc(var(--thumbnail-width) + 1rem);
      max-width: calc(var(--thumbnail-width) + 1rem);
    }
  }

  & .splide__arrows {
    position: unset;
  }

  & .splide__arrow {
    @apply absolute top-1/2 transform -translate-y-1/2;

    &--prev {
      @apply left-0;
    }

    &--next {
      @apply right-0;
    }

    & svg {
      @apply h-8;
    }
  }
}

.thumbnail-list {
  @apply !flex;
}
